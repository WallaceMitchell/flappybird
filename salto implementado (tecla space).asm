.ORIG x3000    

LD R0, COLOR_CELESTE
LD R1, SCREEN_BASE 
LD R2, #0
LD R3, TOTAL_PIXELS  
FILL_MEMORY
STR R0, R1, #0       
ADD R1, R1, #1       
ADD R2, R2, #1       
ADD R3, R3, #-1      
BRp FILL_MEMORY

BRnzp PARTE2

COLOR_CELESTE .FILL xB6DC
SCREEN_BASE .FILL xC000
TOTAL_PIXELS .FILL x3E00
pajaroini .FILL xCA28
COLOR_AMARILLO .FILL xFFE0
COLOR_AMARILLOC .FILL xFFF5
COLOR_NARANJA .FILL xFA60
COLOR_NEGRO .FILL x0000
COLOR_BLANCO .FILL xEF9D

GUARDAR .BLKW 1
PARTE2

LD R0, pajaroini
ST R0, GUARDAR

CAIDA
JSR COMPARE_SPACE
LD R0, GUARDAR
LD R1, COLOR_AMARILLO
LD R2, COLOR_AMARILLOC
LD R3, COLOR_NARANJA
LD R4, COLOR_NEGRO
LD R5, COLOR_BLANCO
LD R6, value126
JSR DIBUJAR_PAJARO
JSR DELAYAUX
LD R0, GUARDAR
JSR BORRAR
LD R0, GUARDAR
ADD R0, R0, R6
ADD R0, R0, #2
ST R0, GUARDAR
BRnzp CAIDA

BORRAR
LD R1, COLOR_CELESTE
LD R2, COLOR_CELESTE
LD R3, COLOR_CELESTE
LD R4, COLOR_CELESTE
LD R5, COLOR_CELESTE

DIBUJAR_PAJARO
STR R4, R0, #0
STR R4, R0, #1
STR R4, R0, #2
STR R4, R0, #3
STR R4, R0, #4
STR R4, R0, #5
ADD R0, R0, R6
STR R4, R0, #0
STR R4, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
STR R4, R0, #5
STR R5, R0, #6
STR R5, R0, #7
STR R4, R0, #8
ADD R0, R0, R6
ADD R0, R0, #1
STR R4, R0, #0
STR R1, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
STR R4, R0, #5
STR R5, R0, #6
STR R5, R0, #7
STR R5, R0, #8
STR R5, R0, #9
STR R4, R0, #10
ADD R0, R0, R6
ADD R0, R0, #1
STR R4, R0, #0
STR R1, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
STR R1, R0, #5
STR R4, R0, #6
STR R5, R0, #7
STR R5, R0, #8
STR R5, R0, #9
STR R4, R0, #10
STR R5, R0, #11
STR R4, R0, #12
ADD R0, R0, R6
ADD R0, R0, #1
STR R4, R0, #0
STR R1, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
STR R1, R0, #5
STR R1, R0, #6
STR R4, R0, #7
STR R5, R0, #8
STR R5, R0, #9
STR R5, R0, #10
STR R4, R0, #11
STR R5, R0, #12
STR R4, R0, #13
ADD R0, R0, R6
ADD R0, R0, #2
STR R4, R0, #0
STR R1, R0, #1
STR R1, R0, #2
STR R1, R0, #3
STR R1, R0, #4
STR R1, R0, #5
STR R1, R0, #6
STR R1, R0, #7
STR R4, R0, #8
STR R5, R0, #9
STR R5, R0, #10
STR R5, R0, #11
STR R5, R0, #12
STR R4, R0, #13
ADD R0, R0, R6
ADD R0, R0, #2
STR R4, R0, #0
STR R4, R0, #1
STR R4, R0, #2
STR R4, R0, #3
STR R4, R0, #4
STR R1, R0, #5
STR R1, R0, #6
STR R1, R0, #7
STR R1, R0, #8
STR R4, R0, #9
STR R4, R0, #10
STR R4, R0, #11
STR R4, R0, #12
STR R4, R0, #13
STR R4, R0, #14
ADD R0, R0, R6
ADD R0, R0, #1
STR R4, R0, #0
STR R2, R0, #1
STR R2, R0, #2
STR R2, R0, #3
STR R2, R0, #4
STR R2, R0, #5
STR R4, R0, #6
STR R1, R0, #7
STR R1, R0, #8
STR R4, R0, #9
STR R3, R0, #10
STR R3, R0, #11
STR R3, R0, #12
STR R3, R0, #13
STR R3, R0, #14
STR R3, R0, #15
STR R4, R0, #16
ADD R0, R0, R6
ADD R0, R0, #2
STR R4, R0, #0
STR R2, R0, #1
STR R2, R0, #2
STR R2, R0, #3
STR R2, R0, #4
STR R4, R0, #5
STR R1, R0, #6
STR R1, R0, #7
STR R4, R0, #8
STR R3, R0, #9
STR R4, R0, #10
STR R4, R0, #11
STR R4, R0, #12
STR R4, R0, #13
STR R4, R0, #14
STR R4, R0, #15
ADD R0, R0, R6
ADD R0, R0, #2
STR R4, R0, #0
STR R2, R0, #1
STR R2, R0, #2
STR R2, R0, #3
STR R4, R0, #4
STR R1, R0, #5
STR R1, R0, #6
STR R1, R0, #7
STR R1, R0, #8
STR R4, R0, #9
STR R3, R0, #10
STR R3, R0, #11
STR R3, R0, #12
STR R3, R0, #13
STR R3, R0, #14
STR R4, R0, #15
ADD R0, R0, R6
ADD R0, R0, #3
STR R4, R0, #0
STR R4, R0, #1
STR R4, R0, #2
STR R4, R0, #3
STR R1, R0, #4
STR R1, R0, #5
STR R1, R0, #6
STR R1, R0, #7
STR R1, R0, #8
STR R4, R0, #9
STR R4, R0, #10
STR R4, R0, #11
STR R4, R0, #12
STR R4, R0, #13
ADD R0, R0, R6
ADD R0, R0, #6
STR R4, R0, #0
STR R4, R0, #1
STR R4, R0, #2
STR R4, R0, #3
STR R4, R0, #4
RET

COMPARE_SPACE
LDI R1, STATUS
BRn AUX
RET

AUX
LDI R1, TECLA
LD R2, spacekey
ADD R1, R1, R2
BRz SUBIR

SUBIR
LD R0, GUARDAR
LD R1, valuejump
ADD R0, R0, R1
ST R0, GUARDAR
BRnzp CAIDA

HALT

DELAYAUX
LD R1, delayaux
DELAY_LOOP2
ADD R1, R1, #-1
BRp DELAY_LOOP2
RET

value126 .FILL #126
delay .FILL #5000
spacekey .FILL #-32
STATUS	.FILL xFE00
TECLA	.FILL xFE02
valuejump .FILL #-2048
delayaux .FILL #10000

.END